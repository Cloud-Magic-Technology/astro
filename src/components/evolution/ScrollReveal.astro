---
interface Props {
	delay?: number;
	class?: string;
}

const { delay = 0, class: className = '' } = Astro.props;
---

<div class={`scroll-reveal ${className}`} style={`--delay: ${delay}ms`} data-scroll-reveal>
	<slot />
</div>

<style>
	.scroll-reveal {
		opacity: 0;
		transform: translateY(30px);
		transition: opacity 0.6s ease-out, transform 0.6s ease-out;
		transition-delay: var(--delay);
	}

	.scroll-reveal.visible {
		opacity: 1;
		transform: translateY(0);
	}
</style>

<script>
	const observer = new IntersectionObserver(
		(entries) => {
			entries.forEach((entry) => {
				if (entry.isIntersecting) {
					entry.target.classList.add('visible');
				}
			});
		},
		{ threshold: 0.1, rootMargin: '0px 0px -50px 0px' }
	);

	document.querySelectorAll('[data-scroll-reveal]').forEach((el) => {
		observer.observe(el);
	});
</script>
